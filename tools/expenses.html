<!DOCTYPE html>
<html lang="te">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∞™‡∞æ‡∞°‡∞ø ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å & ‡∞≤‡∞æ‡∞≠‡∞®‡∞∑‡±ç‡∞ü‡∞Ç</title>

<style>
/* ===== RESET ===== */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family: system-ui, sans-serif;
}

/* ===== BODY WITH BACKGROUND ===== */
body{
  min-height:100vh;
  background-image: url("../assets/images/paddy1.jpg");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: background-image 1.5s ease-in-out;
  color:#1b1b1b;
  position: relative;
}

/* Dark overlay for readability */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background: rgba(0,0,0,0.45);
  z-index:-1;
}

/* ===== CONTAINER ===== */
.container{
  max-width:480px;
  margin:auto;
  padding:16px;
}

/* ===== CARD BOX ===== */
.box{
  background:#ffffffee;
  border-radius:16px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 4px 12px rgba(0,0,0,.15);
}

/* ===== HEADINGS ===== */
h1{text-align:center;font-size:20px}
h2{font-size:18px;margin-bottom:10px}

/* ===== INPUTS ===== */
.field{margin-bottom:10px}
label{font-size:15px;display:block;margin-bottom:4px}
input{
  width:100%;
  padding:12px;
  font-size:18px;
  border-radius:10px;
  border:1px solid #ccc;
}

/* ===== BUTTONS ===== */
.btn{
  width:100%;
  padding:14px;
  font-size:17px;
  border:none;
  border-radius:14px;
  font-weight:bold;
  margin-top:8px;
  cursor:pointer;
}

.calc{background:#2e7d32;color:#fff}
.save{background:#0277bd;color:#fff}
.historyBtn{background:#6a1b9a;color:#fff}
.wa{background:#25D366;color:#fff}
.del{background:#c62828;color:#fff;font-size:14px;padding:8px;border-radius:10px}
.share{background:#25D366;color:#fff;font-size:14px;padding:8px;border-radius:10px}

/* ===== RESULTS ===== */
.result{font-weight:600;font-size:16px}
.profit{color:#2e7d32}
.loss{color:#c62828}

/* ===== HISTORY ===== */
.history-item{
  border-top:1px solid #eee;
  padding-top:10px;
  margin-top:10px;
  font-size:14px;
}

.time{font-size:13px;color:#555;margin-bottom:6px}

.actions{
  display:flex;
  gap:8px;
  margin-top:8px;
}

/* ===== WARNING ===== */
.warning{
  background:#fff3cd;
  color:#664d03;
  padding:12px;
  border-radius:14px;
  font-size:14px;
  margin-top:12px;
}

/* ===== MOBILE FINE TUNING ===== */
@media (max-width:600px){
  body{
    background-position: center top;
  }
}
</style>
</head>

<body>

<div class="container">

<div class="box">
<h1>üåæ ‡∞™‡∞æ‡∞°‡∞ø ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å & ‡∞≤‡∞æ‡∞≠‡∞®‡∞∑‡±ç‡∞ü‡∞Ç</h1>
</div>

<div class="box">
<h2>üìâ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å</h2>
<div class="field"><label>üå± ‡∞™‡∞ø‡∞ö‡∞ø‡∞ï‡∞æ‡∞∞‡±Ä (‚Çπ)</label><input id="pesticide" type="number"></div>
<div class="field"><label>üöú ‡∞ï‡±ã‡∞§ ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç (‚Çπ)</label><input id="harvest" type="number"></div>
<div class="field"><label>üë∑ ‡∞ï‡±Ç‡∞≤‡±Ä‡∞≤‡±Å (‚Çπ)</label><input id="wages" type="number"></div>
<div class="field"><label>üì¶ ‡∞á‡∞§‡∞∞ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å‡∞≤‡±Å (‚Çπ)</label><input id="other" type="number"></div>
</div>

<div class="box">
<h2>üìà ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç</h2>
<div class="field"><label>üåæ ‡∞Ö‡∞Æ‡±ç‡∞Æ‡∞ø‡∞® ‡∞¨‡∞∏‡±ç‡∞§‡∞æ‡∞≤‡±Å</label><input id="bags" type="number"></div>
<div class="field"><label>üí∞ ‡∞í‡∞ï‡±ç‡∞ï ‡∞¨‡∞∏‡±ç‡∞§‡∞æ ‡∞ß‡∞∞ (‚Çπ)</label><input id="price" type="number"></div>
</div>

<button class="btn calc" onclick="calculate()">üßÆ ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï ‡∞ö‡±Ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</button>
<button class="btn save" onclick="saveRecord()">üíæ ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</button>
<button class="btn historyBtn" onclick="toggleHistory()">üìú ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞∏‡∞ø‡∞® ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å</button>

<div class="box result">üìâ ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å: ‚Çπ <span id="exp">0</span></div>
<div class="box result">üìà ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç: ‚Çπ <span id="inc">0</span></div>
<div class="box result" id="net">üìä ‡∞≤‡∞æ‡∞≠‡∞Ç / ‡∞®‡∞∑‡±ç‡∞ü‡∞Ç</div>

<div class="warning">
‚ö†Ô∏è ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï:<br>
‚Ä¢ ‡∞à ‡∞°‡±á‡∞ü‡∞æ ‡∞á‡∞Ç‡∞ü‡∞∞‡±ç‡∞®‡±Ü‡∞ü‡±ç‚Äå‡∞≤‡±ã ‡∞∏‡±á‡∞µ‡±ç ‡∞ï‡∞æ‡∞µ‡∞°‡∞Ç ‡∞≤‡±á‡∞¶‡±Å<br>
‚Ä¢ ‡∞Æ‡±Ä ‡∞Æ‡±ä‡∞¨‡±à‡∞≤‡±ç / ‡∞¨‡±ç‡∞∞‡±å‡∞ú‡∞∞‡±ç‚Äå‡∞≤‡±ã‡∞®‡±á ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø<br>
‚Ä¢ ‡∞¨‡±ç‡∞∞‡±å‡∞ú‡∞∞‡±ç ‡∞°‡±á‡∞ü‡∞æ ‡∞ï‡±ç‡∞≤‡∞ø‡∞Ø‡∞∞‡±ç ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±á ‡∞á‡∞¶‡∞ø ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø‡∞ó‡∞æ ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞™‡±ã‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
</div>

<div class="box" id="historyBox" style="display:none">
<h2>üìú ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞∏‡∞ø‡∞® ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞</h2>
<div id="historyList"></div>
</div>

</div>

<script>
/* ===== BACKGROUND ROTATION ===== */
const backgrounds = [
  "../assets/images/paddy1.jpg",
  "../assets/images/paddy2.jpg",
  "../assets/images/paddy3.jpg",
  "../assets/images/paddy4.jpg"
];
let bgIndex = 0;
setInterval(()=>{
  bgIndex = (bgIndex+1) % backgrounds.length;
  document.body.style.backgroundImage =
    `url('${backgrounds[bgIndex]}')`;
},7000);

/* ===== LOGIC (UNCHANGED) ===== */
let last={};
function v(id){return Number(document.getElementById(id).value)||0}

function calculate(){
  let expense=v("pesticide")+v("harvest")+v("wages")+v("other");
  let income=v("bags")*v("price");
  let net=income-expense;

  exp.innerText=expense;
  inc.innerText=income;
  net>=0
    ? setNet(`‚úÖ ‡∞≤‡∞æ‡∞≠‡∞Ç: ‚Çπ ${net}`,"profit")
    : setNet(`‚ùå ‡∞®‡∞∑‡±ç‡∞ü‡∞Ç: ‚Çπ ${Math.abs(net)}`,"loss");

  last={expense,income,net,
    pesticide:v("pesticide"),
    harvest:v("harvest"),
    wages:v("wages"),
    other:v("other"),
    bags:v("bags"),
    price:v("price")
  };
}

function setNet(text,cls){
  net.innerHTML=text;
  net.className="box result "+cls;
}

function saveRecord(){
  if(!last.income){alert("‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å‡∞ó‡∞æ ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï ‡∞ö‡±Ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø");return}
  let h=JSON.parse(localStorage.getItem("paddy_history")||"[]");
  h.unshift({time:new Date().toLocaleString("te-IN"),data:last});
  localStorage.setItem("paddy_history",JSON.stringify(h));
  alert("üíæ ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞∏‡±á‡∞µ‡±ç ‡∞Ö‡∞Ø‡±ç‡∞Ø‡∞æ‡∞Ø‡∞ø");
}

function toggleHistory(){
  historyBox.style.display=
    historyBox.style.display==="none"?"block":"none";
  loadHistory();
}

function loadHistory(){
  let h=JSON.parse(localStorage.getItem("paddy_history")||"[]");
  historyList.innerHTML=h.length?"":"‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞∏‡∞ø‡∞® ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞≤‡±Å ‡∞≤‡±á‡∞µ‡±Å";

  h.forEach((item,i)=>{
    historyList.innerHTML+=`
    <div class="history-item">
      <div class="time">üïí ${item.time}</div>
      üåæ ‡∞¨‡∞∏‡±ç‡∞§‡∞æ‡∞≤‡±Å: ${item.data.bags}<br>
      üìâ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å: ‚Çπ${item.data.expense}<br>
      üìà ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç: ‚Çπ${item.data.income}<br>
      ${item.data.net>=0?`‚úÖ ‡∞≤‡∞æ‡∞≠‡∞Ç: ‚Çπ${item.data.net}`:`‚ùå ‡∞®‡∞∑‡±ç‡∞ü‡∞Ç: ‚Çπ${Math.abs(item.data.net)}`}
      <div class="actions">
        <button class="share" onclick="shareOne(${i})">üì≤ ‡∞∑‡±á‡∞∞‡±ç</button>
        <button class="del" onclick="deleteOne(${i})">üóëÔ∏è ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</button>
      </div>
    </div>`;
  });
}

function deleteOne(i){
  if(!confirm("‡∞à ‡∞µ‡∞ø‡∞µ‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞æ?"))return;
  let h=JSON.parse(localStorage.getItem("paddy_history"));
  h.splice(i,1);
  localStorage.setItem("paddy_history",JSON.stringify(h));
  loadHistory();
}

function shareOne(i){
  let h=JSON.parse(localStorage.getItem("paddy_history"));
  let d=h[i].data;
  let text=`üåæ ‡∞™‡∞æ‡∞°‡∞ø ‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞≤ ‡∞∏‡∞Ç‡∞ó‡±ç‡∞∞‡∞π‡∞Ç\nüïí ${h[i].time}\n\nüìâ ‡∞ñ‡∞∞‡±ç‡∞ö‡±Å ‚Çπ${d.expense}\nüìà ‡∞Ü‡∞¶‡∞æ‡∞Ø‡∞Ç ‚Çπ${d.income}\n${d.net>=0?"‚úÖ ‡∞≤‡∞æ‡∞≠‡∞Ç":"‚ùå ‡∞®‡∞∑‡±ç‡∞ü‡∞Ç"} ‚Çπ${Math.abs(d.net)}`;
  window.open("https://wa.me/?text="+encodeURIComponent(text));
}
</script>

</body>
</html>
